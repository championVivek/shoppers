(this["webpackJsonpshopping-frontend"]=this["webpackJsonpshopping-frontend"]||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},108:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),r=a.n(c),s=a(17),i=a.n(s),o=a(11),d=(a(72),a(4)),u=a.n(d),l=a(10),j=a(8),b=a(12),p=a(55),h=a.n(p),O=Object(c.createContext)(),x=Object(c.createContext)(),m=a(128),v=a(129),f=a(132),g=a(57),y=a(32),_=a.n(y),k=a(33),C=a.n(k),S=a(22),w=a(9),N=a(56),I=a.n(N).a.create({baseURL:"http://localhost:4000"});a(92);var E=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),a=t[0],s=t[1],i=Object(c.useState)(),o=Object(j.a)(i,2),d=o[0],p=o[1],h=Object(c.useContext)(O).state,y=Object(c.useContext)(x).setBasket,k=Object(b.g)();Object(c.useEffect)((function(){N()}),[]);var N=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,I.get("/products");case 4:t=e.sent,p(!1),s(t.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response.data.msg&&w.b.error(e.t0.response.data.msg,{autoClose:2e3});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),E=function(e){"true"===h.isAdmin||void 0===h.id?w.b.dark("You have to Login as user to buy an item!",{autoClose:3e3,position:w.b.POSITION.TOP_CENTER}):(p(!0),I.post("/cart",{id:e.target.value,userId:h.id}).then((function(e){p(!1),y(e.data.totalQuantity)})))},A=function(e){"true"===h.isAdmin||void 0===h.id?w.b.dark("You have to Login as user to buy an item!",{autoClose:3e3,position:w.b.POSITION.TOP_CENTER}):(p(!0),I.post("/cart",{id:e.target.value,userId:h.id}).then((function(e){p(!1),k.push("/basket/".concat(h.id))})))};return Object(n.jsx)(r.a.Fragment,{children:d?Object(n.jsx)(m.a,{animation:"border",role:"status",variant:"info",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(n.jsx)("div",{className:"products__list",children:Object(n.jsxs)(v.a,{children:[Object(n.jsx)(w.a,{}),Object(n.jsx)(r.a.Fragment,{children:a.map((function(e,t){return Object(n.jsxs)(f.a,{children:[Object(n.jsx)(f.a.Img,{variant:"top",src:"http://localhost:4000/".concat(e.imageUrl)}),Object(n.jsxs)(f.a.Body,{children:[Object(n.jsx)(f.a.Title,{children:e.title}),Object(n.jsxs)(f.a.Text,{children:["Price: ",Object(n.jsx)(S.a,{value:e.price,displayType:"text",thousandSeparator:!0,prefix:"\u20b9"})]}),Object(n.jsxs)("div",{className:"card__buttons",children:[Object(n.jsxs)(g.a,{variant:"info",value:e._id,onClick:E,children:[Object(n.jsx)(_.a,{}),"Add to cart"]}),Object(n.jsxs)(g.a,{variant:"warning",value:e._id,onClick:A,children:[Object(n.jsx)(C.a,{}),"Buy Now"]})]})]})]},t)}))})]})})})},A=a(130),L=a(58),T=a.n(L);a(98);var P=function(){var e=Object(c.useContext)(O),t=e.state,a=e.dispatch,r=Object(c.useContext)(x).basket,s=Object(b.g)(),i=function(){a({type:"SETUSER",token:void 0,id:void 0,username:void 0,isAdmin:void 0,isLoggedIn:!1}),localStorage.setItem("auth-token",""),localStorage.setItem("isAdmin",null),s.push("/"),window.location.reload(!1)};return Object(n.jsxs)("nav",{className:"header",children:[Object(n.jsx)("div",{className:"header__brand",children:Object(n.jsx)("h1",{children:"SHOPPERS"})}),Object(n.jsx)("div",{className:"header__nav__left",children:Object(n.jsx)(o.b,{to:"/",children:"Home"})}),Object(n.jsxs)("div",{className:"header__search",children:[Object(n.jsx)("input",{type:"text",className:"header__searchInput"}),Object(n.jsx)(T.a,{className:"header__searchIcon"})]}),t.id&&"false"===t.isAdmin?Object(n.jsxs)("div",{className:"header__nav",children:[Object(n.jsx)(o.b,{to:"/myorders",children:"Orders"}),Object(n.jsx)(g.a,{variant:"link",onClick:i,children:"Logout"}),Object(n.jsx)("div",{className:"header__basket",children:Object(n.jsxs)(o.b,{className:"header__basket__link",to:"/basket/".concat(t.id),children:[Object(n.jsx)(_.a,{}),Object(n.jsx)("span",{children:r})]})})]}):t.id&&"true"===t.isAdmin?Object(n.jsxs)("div",{className:"header__nav",children:[Object(n.jsx)(o.b,{to:"/admin/products",children:"Products"}),Object(n.jsx)(o.b,{to:"/admin/add_product",children:"Add Product"}),Object(n.jsx)(o.b,{onClick:i,children:"Logout"})]}):Object(n.jsxs)("div",{className:"header__nav",children:[Object(n.jsxs)(A.a,{title:"Login",id:"basic-nav-dropdown",className:"header__nav__dropdown",children:[Object(n.jsx)(A.a.Item,{as:o.b,to:"/login",children:"As User"}),Object(n.jsx)(A.a.Item,{as:o.b,to:"/admin/login",children:"As Seller"})]}),Object(n.jsxs)(A.a,{title:"Signup",id:"basic-nav-dropdown",className:"header__nav__dropdown",children:[Object(n.jsx)(A.a.Item,{as:o.b,to:"/signup",children:"As User"}),Object(n.jsx)(A.a.Item,{as:o.b,to:"/admin/signup",children:"As Seller"})]})]})]})},B=a(131);a(53);var F=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(""),i=Object(j.a)(s,2),d=i[0],p=i[1],h=Object(c.useContext)(O).dispatch,x=Object(b.g)(),m=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),e.next=4,I.post("/userlogin",{email:a,password:d});case 4:(n=e.sent)&&(h({type:"SETUSER",token:n.data.token,id:n.data.id,username:n.data.username,isAdmin:n.data.isAdmin,isLoggedIn:!0}),localStorage.setItem("auth-token",n.data.token),localStorage.setItem("isAdmin",n.data.isAdmin),x.push("/"),window.location.reload(!1)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response.data.msg&&w.b.error(e.t0.response.data.msg,{autoClose:2e3});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"login",children:Object(n.jsxs)("div",{className:"login__body",children:[Object(n.jsx)("h1",{children:"Login"}),Object(n.jsx)(w.a,{}),Object(n.jsxs)(B.a,{onSubmit:m,children:[Object(n.jsxs)(B.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(B.a.Label,{children:"Email"}),Object(n.jsx)(B.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return r(e.target.value)}})]}),Object(n.jsxs)(B.a.Group,{controlId:"formBasicPassword",children:[Object(n.jsx)(B.a.Label,{children:"Password"}),Object(n.jsx)(B.a.Control,{type:"password",placeholder:"Atleast 5 characters",onChange:function(e){return p(e.target.value)}})]}),Object(n.jsx)(g.a,{variant:"success",type:"submit",children:"Login"})," ",Object(n.jsx)(g.a,{as:o.b,to:"/signup",variant:"secondary",children:"Don't have an account?"})]})]})})};a(54);var G=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(""),i=Object(j.a)(s,2),d=i[0],p=i[1],h=Object(c.useState)(""),O=Object(j.a)(h,2),x=O[0],m=O[1],v=Object(b.g)(),f=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,I.post("/usersignup",{name:a,email:d,password:x});case 4:v.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),e.t0.response.data.msg&&w.b.error(e.t0.response.data.msg,{autoClose:2e3});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"signup",children:[Object(n.jsx)(w.a,{}),Object(n.jsxs)("div",{className:"signup__body",children:[Object(n.jsx)("h1",{children:"Create Account"}),Object(n.jsxs)(B.a,{onSubmit:f,children:[Object(n.jsxs)(B.a.Group,{children:[Object(n.jsx)(B.a.Label,{children:"Name"}),Object(n.jsx)(B.a.Control,{type:"text",placeholder:"Enter name",onChange:function(e){return r(e.target.value)}})]}),Object(n.jsxs)(B.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(B.a.Label,{children:"Email"}),Object(n.jsx)(B.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return p(e.target.value)}})]}),Object(n.jsxs)(B.a.Group,{children:[Object(n.jsx)(B.a.Label,{children:"Password"}),Object(n.jsx)(B.a.Control,{type:"password",placeholder:"Atleast 5 characters",onChange:function(e){return m(e.target.value)}})]}),Object(n.jsx)(g.a,{variant:"success",type:"submit",children:"Signup"})," ",Object(n.jsx)(g.a,{as:o.b,to:"/login",variant:"secondary",children:"Already have an account?"})]})]})]})};var D=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(""),i=Object(j.a)(s,2),d=i[0],p=i[1],h=Object(c.useState)(""),O=Object(j.a)(h,2),x=O[0],m=O[1],v=Object(b.g)(),f=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,I.post("/adminsignup",{name:a,email:d,password:x});case 4:v.push("/admin/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),e.t0.response.data.msg&&w.b.error(e.t0.response.data.msg,{autoClose:2e3});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"signup",children:[Object(n.jsx)(w.a,{}),Object(n.jsxs)("div",{className:"signup__body",children:[Object(n.jsx)("h1",{children:"Create Seller Account"}),Object(n.jsxs)(B.a,{onSubmit:f,children:[Object(n.jsxs)(B.a.Group,{children:[Object(n.jsx)(B.a.Label,{children:"Seller Name"}),Object(n.jsx)(B.a.Control,{type:"text",placeholder:"Enter name",onChange:function(e){return r(e.target.value)}})]}),Object(n.jsxs)(B.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(B.a.Label,{children:"Seller Email"}),Object(n.jsx)(B.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return p(e.target.value)}})]}),Object(n.jsxs)(B.a.Group,{controlId:"formBasicPassword",children:[Object(n.jsx)(B.a.Label,{children:"Seller Password"}),Object(n.jsx)(B.a.Control,{type:"password",placeholder:"Atleast 5 characters",onChange:function(e){return m(e.target.value)}})]}),Object(n.jsx)(g.a,{variant:"success",type:"submit",children:"Signup"})," ",Object(n.jsx)(g.a,{as:o.b,to:"/admin/login",variant:"secondary",children:"Already have an account?"})]})]})]})};var R=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(""),i=Object(j.a)(s,2),d=i[0],p=i[1],h=Object(c.useContext)(O).dispatch,x=Object(b.g)(),m=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,I.post("/adminlogin",{email:a,password:d});case 4:(n=e.sent)&&(h({type:"SETUSER",token:n.data.token,id:n.data.user.id,username:n.data.user.username,isAdmin:n.data.isAdmin,isLoggedIn:!0}),localStorage.setItem("auth-token",n.data.token),localStorage.setItem("isAdmin",n.data.isAdmin),x.push("/"),window.location.reload(!1)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),e.t0.response.data.msg&&w.b.error(e.t0.response.data.msg,{autoClose:2e3});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"login",children:[Object(n.jsx)(w.a,{}),Object(n.jsxs)("div",{className:"login__body",children:[Object(n.jsx)("h1",{children:"Seller Login"}),Object(n.jsxs)(B.a,{onSubmit:m,children:[Object(n.jsxs)(B.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(B.a.Label,{children:"Email"}),Object(n.jsx)(B.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return r(e.target.value)}})]}),Object(n.jsxs)(B.a.Group,{controlId:"formBasicPassword",children:[Object(n.jsx)(B.a.Label,{children:"Password"}),Object(n.jsx)(B.a.Control,{type:"password",placeholder:"Atleast 5 characters",onChange:function(e){return p(e.target.value)}})]}),Object(n.jsx)(g.a,{variant:"success",type:"submit",children:"Login"})," ",Object(n.jsx)(g.a,{as:o.b,to:"/admin/signup",variant:"secondary",children:"Don't have an account?"})]})]})]})};a(101);var U=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],s=t[1],i=Object(c.useState)(""),o=Object(j.a)(i,2),d=o[0],p=o[1],h=Object(c.useState)(),x=Object(j.a)(h,2),v=x[0],f=x[1],y=Object(c.useState)(),_=Object(j.a)(y,2),k=_[0],C=_[1],S=Object(c.useContext)(O).state,N=Object(b.g)(),E=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),(n=new FormData).append("file",v),n.append("title",a),n.append("price",d),n.append("id",S.id),c={headers:{"content-type":"multipart/form-data"}},C(!0),e.next=11,I.post("/addproducts",n,c);case 11:C(!1),N.push("/admin/products"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),e.t0.response.data.msg&&w.b.error(e.t0.response.data.msg,{autoClose:2e3});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(r.a.Fragment,{children:k?Object(n.jsx)(m.a,{animation:"border",role:"status",variant:"warning",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(n.jsxs)("div",{className:"AddProduct",children:[Object(n.jsx)(w.a,{}),Object(n.jsxs)("div",{className:"AddProduct__body",children:[Object(n.jsx)("h3",{children:"Add products"}),Object(n.jsxs)(B.a,{onSubmit:E,children:[Object(n.jsxs)(B.a.Group,{children:[Object(n.jsx)(B.a.Label,{children:"Title"}),Object(n.jsx)(B.a.Control,{type:"text",placeholder:"Enter title",onChange:function(e){return s(e.target.value)}})]}),Object(n.jsxs)(B.a.Group,{children:[Object(n.jsx)(B.a.Label,{children:"Price"}),Object(n.jsx)(B.a.Control,{type:"number",placeholder:"Enter price",onChange:function(e){return p(e.target.value)}})]}),Object(n.jsxs)(B.a.Group,{children:[Object(n.jsx)(B.a.Label,{children:"Image"}),Object(n.jsx)(B.a.File,{id:"custom-file",label:"Choose image",onChange:function(e){var t=e.target.files[0];f(t)}})]}),Object(n.jsx)("div",{className:"addproduct__button",children:Object(n.jsx)(g.a,{variant:"success",type:"submit",children:"Add"})})]})]})]})})};a(102);var q=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),a=t[0],s=t[1],i=Object(c.useState)(),o=Object(j.a)(i,2),d=o[0],p=o[1],h=Object(c.useContext)(O).state,x=Object(b.g)();Object(c.useEffect)((function(){y()}),[]);var y=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,I.post("admin/products",{id:h.id});case 4:t=e.sent,p(!1),s(t.data),console.log(t.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response.data.msg&&w.b.error(e.t0.response.data.msg,{autoClose:2e3});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,I.post("admin/".concat(h.id,"/deleteproducts"),{productId:t.target.value});case 4:a=e.sent,p(!1),s(a.data.products),w.b.success(a.data.msg,{autoClose:2e3}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response.data.msg&&w.b.error(e.t0.response.data.msg,{autoClose:2e3});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),k=function(e){x.push("/admin/".concat(e.target.value,"/editproduct"))};return Object(n.jsx)(r.a.Fragment,{children:d?Object(n.jsx)(m.a,{animation:"border",role:"status",variant:"warning",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(n.jsxs)("div",{className:"products__list",children:[Object(n.jsx)(w.a,{}),a.length<=0?Object(n.jsx)("h1",{children:"No products"}):Object(n.jsx)(v.a,{children:a.map((function(e,t){return Object(n.jsxs)(f.a,{children:[Object(n.jsx)(f.a.Img,{variant:"top",src:"http://localhost:4000/".concat(e.imageUrl)}),Object(n.jsxs)(f.a.Body,{children:[Object(n.jsx)(f.a.Title,{children:e.title}),Object(n.jsxs)(f.a.Text,{children:["Price:"," ",Object(n.jsx)(S.a,{value:e.price,displayType:"text",thousandSeparator:!0,prefix:"\u20b9"})]}),Object(n.jsxs)("div",{className:"card__buttons",children:[Object(n.jsx)(g.a,{variant:"danger",value:e._id,onClick:_,children:"Delete"}),Object(n.jsx)(g.a,{variant:"secondary",value:e._id,onClick:k,children:"Edit product"})]})]})]},t)}))})]})})},Q=a(64);a(103);var H=function(){var e=Object(c.useState)(),t=Object(j.a)(e,2),a=t[0],r=t[1],s=Object(c.useContext)(O).state,i=Object(b.h)().id,o=Object(Q.a)(),d=o.handleSubmit,p=o.setValue,h=o.register,x=Object(b.g)();Object(c.useEffect)((function(){I.post("/admin/".concat(i,"/geteditproduct"),{id:s.id}).then((function(e){p("title",e.data.title),p("price",e.data.price)}))}),[]);var m=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new FormData).append("file",a),n.append("title",t.title),n.append("price",t.price),n.append("adminId",s.user.id),c={headers:{"content-type":"multipart/form-data"}},e.next=9,I.post("/admin/".concat(i,"/editproduct"),n,c);case 9:r=e.sent,w.b.success(r.data.msg,{autoClose:2e3}),x.push("/admin/".concat(s.id,"/products")),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),w.b.error(e.t0.response.data.msg,{autoClose:2e3});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"EditProduct",children:[Object(n.jsx)(w.a,{}),Object(n.jsxs)("div",{className:"EditProduct__body",children:[Object(n.jsx)("h3",{children:"Edit product"}),Object(n.jsxs)(B.a,{onSubmit:d(m),children:[Object(n.jsxs)(B.a.Group,{children:[Object(n.jsx)(B.a.Label,{children:"Title"}),Object(n.jsx)(B.a.Control,{ref:h,name:"title",type:"text",placeholder:"Enter title"})]}),Object(n.jsxs)(B.a.Group,{children:[Object(n.jsx)(B.a.Label,{children:"Price"}),Object(n.jsx)(B.a.Control,{ref:h,name:"price",type:"number",placeholder:"Enter price"})]}),Object(n.jsxs)(B.a.Group,{children:[Object(n.jsx)(B.a.Label,{children:"Image"}),Object(n.jsx)(B.a.File,{id:"custom-file",label:"Choose image",onChange:function(e){var t=e.target.files[0];r(t)}})]}),Object(n.jsx)("div",{className:"editproduct__button",children:Object(n.jsx)(g.a,{variant:"success",type:"submit",children:"Edit"})})]})]})]})};a(104);var J=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),a=t[0],s=t[1],i=Object(c.useState)(),o=Object(j.a)(i,2),d=o[0],p=o[1],h=Object(c.useState)(),v=Object(j.a)(h,2),y=v[0],_=v[1],k=Object(c.useContext)(O).state,N=Object(c.useContext)(x).setBasket,E=Object(b.h)().id,A=Object(b.g)();Object(c.useEffect)((function(){L()}),[]);var L=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(!0),e.next=4,I.post("/getcart",{userId:E});case 4:t=e.sent,_(!1),s(t.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response.data.msg&&w.b.error(e.t0.response.data.msg,{autoClose:2e3});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){k.id&&I.post("/gettotal",{userId:k.id}).then((function(e){N(e.data.totalQuantity),p(e.data.total)}))}));var T=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(!0),e.next=4,I.post("/deleteproductincart/".concat(E),{productId:t.target.value});case 4:a=e.sent,_(!1),s(a.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response.data.msg&&w.b.error(e.t0.response.data.msg,{autoClose:2e3});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(r.a.Fragment,{children:y?Object(n.jsx)(m.a,{animation:"border",role:"status",variant:"warning",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(n.jsx)("div",{className:"cartproducts__list",children:a.length<=0?Object(n.jsx)("h1",{children:"Cart is empty!!"}):Object(n.jsxs)(r.a.Fragment,{children:[Object(n.jsx)(w.a,{}),a.map((function(e,t){return Object(n.jsxs)(f.a,{className:"cartproducts__card",children:[Object(n.jsxs)(f.a.Body,{children:[Object(n.jsx)(f.a.Img,{variant:"top",src:"http://localhost:4000/".concat(e.productId.imageUrl)}),Object(n.jsxs)("div",{className:"cartproducts__title",children:[Object(n.jsx)(f.a.Title,{children:e.productId.title}),Object(n.jsxs)(f.a.Text,{className:"card__quantity",children:["Quantity: ",e.quantity]}),Object(n.jsxs)(f.a.Text,{children:["Price:"," ",Object(n.jsx)(S.a,{value:e.productId.price,displayType:"text",thousandSeparator:!0,prefix:"\u20b9"})]})]})]}),Object(n.jsxs)("div",{className:"cartproducts__footer",children:[Object(n.jsxs)("h4",{children:["Sub-total:"," ",Object(n.jsx)(S.a,{value:e.quantity*e.productId.price,displayType:"text",thousandSeparator:!0,prefix:"\u20b9"})]}),Object(n.jsx)(g.a,{variant:"danger",value:e.productId._id,onClick:T,children:"Remove from Cart"})]})]},t)})),Object(n.jsxs)("div",{className:"checkout",children:[Object(n.jsxs)("div",{className:"checkout__total",children:["Total:"," ",Object(n.jsx)(S.a,{value:d,displayType:"text",thousandSeparator:!0,prefix:"\u20b9"})]}),Object(n.jsx)("div",{className:"checkout__button",children:Object(n.jsxs)(g.a,{onClick:function(){A.push("/checkout")},children:[Object(n.jsx)(C.a,{}),"Proceed to Buy"]})})]})]})})})},Y=a(62),M=(a(105),function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/sendpikey");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){return Object(Y.a)(e)})));var V=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),a=t[0],s=t[1],i=Object(c.useState)(),o=Object(j.a)(i,2),d=o[0],p=o[1],h=Object(c.useState)(),x=Object(j.a)(h,2),v=x[0],y=x[1],_=Object(c.useContext)(O).state,k=Object(b.g)();Object(c.useEffect)((function(){y(!0),I.post("/getcart",{userId:_.id}).then((function(e){y(!1),s(e.data)})),I.post("/gettotal",{userId:_.id}).then((function(e){p(e.data.total)}))}),[]);var C=function(){var e=Object(l.a)(u.a.mark((function e(){var t,a,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M;case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return");case 6:return y(!0),e.next=9,I.post("/checkout",{userId:_.id});case 9:return a=e.sent,n=a.data.id,y(!0),e.next=14,t.redirectToCheckout({sessionId:n});case 14:(c=e.sent).error?console.log(c.error.message):"succeeded"===c.paymentIntent.status&&(y(!1),k.push("/")),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),e.t0.response.data.msg&&w.b.error(e.t0.response.data.msg,{autoClose:2e3});case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(r.a.Fragment,{children:v?Object(n.jsx)(m.a,{animation:"border",role:"status",variant:"warning",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(n.jsxs)("div",{className:"checkoutproducts__list",children:[Object(n.jsx)(w.a,{}),a.map((function(e,t){return Object(n.jsx)(f.a,{className:"checkoutproducts__card",children:Object(n.jsx)(f.a.Body,{children:Object(n.jsxs)("div",{className:"checkoutproducts__title",children:[Object(n.jsx)(f.a.Title,{children:e.productId.title}),Object(n.jsxs)(f.a.Text,{className:"checkout__quantity",children:["Quantity: ",e.quantity]})]})})},t)})),Object(n.jsxs)("div",{className:"checkout",children:[Object(n.jsxs)("div",{className:"checkout__total",children:["Total: ",Object(n.jsx)(S.a,{value:d,displayType:"text",thousandSeparator:!0,prefix:"\u20b9"})]}),Object(n.jsx)("div",{className:"checkout__button",children:Object(n.jsx)(g.a,{onClick:C,children:"PLACE ORDER"})})," "]})]})})},z=a(63);a(106);var K=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),a=t[0],s=t[1],i=Object(c.useState)(),o=Object(j.a)(i,2),d=o[0],b=o[1],p=Object(c.useContext)(O).state;Object(c.useEffect)((function(){h()}),[]);var h=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,I.post("/myorders",{userId:p.id});case 4:t=e.sent,b(!1),s(t.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response.data.msg&&w.b.error(e.t0.response.data.msg,{autoClose:2e3});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,I.post("/makeinvoice",{orderId:t.target.value,userId:p.id});case 4:if(!e.sent){e.next=13;break}return b(!0),e.next=9,I.post("/getinvoice",{orderId:t.target.value},{responseType:"blob"});case 9:a=e.sent,b(!1),n=new Blob([a.data],{type:"application/pdf"}),Object(z.saveAs)(n,"invoice.pdf");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),e.t0.response.data.msg&&w.b.error(e.t0.response.data.msg,{autoClose:2e3});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(r.a.Fragment,{children:d?Object(n.jsx)(m.a,{animation:"border",role:"status",variant:"warning",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(n.jsxs)("div",{children:[Object(n.jsx)(w.a,{}),a.length<=0?Object(n.jsx)("h1",{children:"Nothing Here!"}):Object(n.jsx)(r.a.Fragment,{children:Object(n.jsx)("div",{className:"orders",children:a.map((function(e,t){return Object(n.jsxs)("div",{className:"orders__item",children:[Object(n.jsx)("div",{className:"orders__item__header",children:Object(n.jsxs)("div",{children:["Order - # ",e._id," -"," ",Object(n.jsx)(g.a,{variant:"link",onClick:x,value:e._id,children:"Invoice"})]})}),Object(n.jsx)("div",{className:"orders__products",children:e.products.map((function(e,t){return Object(n.jsxs)("div",{className:"orders__products-item",children:[e.product.title,Object(n.jsxs)("div",{className:"orders__products-item__quantity",children:["Quantity: (",e.quantity,")"]})]},t)}))})]},t)}))})})]})})},W=a(35),X=a(65),Z=function(e){var t=e.component,a=e.path,r=Object(X.a)(e,["component","path"]),s=Object(c.useContext)(O).state;return Object(n.jsx)(b.b,Object(W.a)(Object(W.a)({path:a},r),{},{render:function(e){return!0===s.isLoggedIn?Object(n.jsx)(t,Object(W.a)({},e)):Object(n.jsx)(b.a,{to:"/login"})}}))};var $=function(){return Object(n.jsx)("div",{children:Object(n.jsx)("h1",{children:"Sorry, you page cannot be found"})})};var ee=function(e,t){switch(t.type){case"SETUSER":return{token:t.token,id:t.id,username:t.username,isAdmin:t.isAdmin,isLoggedIn:t.isLoggedIn};default:return{state:e}}},te=(a(107),a(108),h()("state")),ae={token:void 0,id:void 0,username:void 0,isAdmin:void 0,isLoggedIn:void 0};var ne=function(){var e=te(ee,ae),t=Object(j.a)(e,2),a=t[0],s=t[1],i=Object(c.useState)(0),o=Object(j.a)(i,2),d=o[0],p=o[1];return Object(c.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("auth-token"),a=localStorage.getItem("isAdmin"),null===t&&(localStorage.setItem("auth-token",""),localStorage.setItem("isAdmin",null),t=" "),e.next=5,I.post("/posttokenisvalid",null,{headers:{"x-auth-token":t,isAdmin:a}});case 5:if(!e.sent.data){e.next=11;break}return e.next=9,I.get("/gettokenisvalid",{headers:{"x-auth-token":t,isAdmin:a}});case 9:n=e.sent,s({type:"SETUSER",token:t,id:n.data.id,username:n.data.username,isAdmin:n.data.isAdmin,isLoggedIn:!0});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.useEffect)((function(){!1===a.isAdmin&&I.post("/gettotal",{userId:a.id}).then((function(e){p(e.data.totalQuantity)}))})),Object(n.jsx)(r.a.Fragment,{children:Object(n.jsx)(O.Provider,{value:{state:a,dispatch:s},children:Object(n.jsxs)(x.Provider,{value:{basket:d,setBasket:p},children:[Object(n.jsx)(P,{}),Object(n.jsxs)(b.d,{children:[Object(n.jsx)(b.b,{path:"/login",component:F}),Object(n.jsx)(b.b,{path:"/signup",component:G}),Object(n.jsx)(b.b,{path:"/admin/signup",component:D}),Object(n.jsx)(b.b,{path:"/admin/login",component:R}),Object(n.jsx)(Z,{path:"/admin/add_product",component:U}),Object(n.jsx)(Z,{path:"/admin/products",component:q}),Object(n.jsx)(Z,{path:"/admin/:id/editproduct",component:H}),Object(n.jsx)(Z,{path:"/checkout",component:V}),Object(n.jsx)(Z,{path:"/myorders",component:K}),Object(n.jsx)(Z,{path:"/basket/:id",component:J}),Object(n.jsx)(b.b,{exact:!0,path:"/",component:E}),Object(n.jsx)(b.b,{path:"*",component:$})]})]})})})},ce=(a(109),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,133)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))});i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(o.a,{children:Object(n.jsx)(ne,{})})}),document.getElementById("root")),ce()},53:function(e,t,a){},54:function(e,t,a){},72:function(e,t,a){},92:function(e,t,a){},98:function(e,t,a){}},[[111,1,2]]]);
//# sourceMappingURL=main.a2a55c53.chunk.js.map